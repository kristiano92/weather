{"version":3,"sources":["../../src/utilities/writeIndex.js"],"names":["directoryPaths","options","sortedDirectoryPaths","filter","directoryPath","silent","ignoreUnsafe","forEach","config","optionsWithConfig","Object","assign","siblings","indexCode","indexFilePath","resolve","writeFileSync"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;kBAEe,UAACA,cAAD,EAAkC;AAAA,MAAjBC,OAAiB,uEAAP,EAAO;;AAC/C,QAAMC,uBAAuB,2BAAYF,cAAZ,EAC1BG,MAD0B,CAClBC,aAAD,IAAmB;AACzB,WAAO,uCAAwBA,aAAxB,EAAuC,EAACC,QAAQJ,QAAQK,YAAjB,EAAvC,CAAP;AACD,GAH0B,CAA7B;;AAKA,mBAAEC,OAAF,CAAUL,oBAAV,EAAiCE,aAAD,IAAmB;AACjD,UAAMI,SAAS,+BAAgBJ,aAAhB,CAAf;AACA,UAAMK,oBAAoBC,OAAOC,MAAP,CAAc,EAAd,EAAkBV,OAAlB,EAA2B,EAACO,MAAD,EAA3B,CAA1B;AACA,UAAMI,WAAW,6BAAcR,aAAd,EAA6BK,iBAA7B,CAAjB;AACA,UAAMI,YAAY,+BAAgBD,QAAhB,EAA0B,EAACJ,MAAD,EAA1B,CAAlB;AACA,UAAMM,gBAAgB,eAAKC,OAAL,CAAaX,aAAb,EAA4B,UAA5B,CAAtB;;AAEA,iBAAGY,aAAH,CAAiBF,aAAjB,EAAgCD,SAAhC;AACD,GARD;AASD,C","file":"writeIndex.js","sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport _ from 'lodash';\nimport createIndexCode from './createIndexCode';\nimport validateTargetDirectory from './validateTargetDirectory';\nimport readDirectory from './readDirectory';\nimport readIndexConfig from './readIndexConfig';\nimport sortByDepth from './sortByDepth';\n\nexport default (directoryPaths, options = {}) => {\n  const sortedDirectoryPaths = sortByDepth(directoryPaths)\n    .filter((directoryPath) => {\n      return validateTargetDirectory(directoryPath, {silent: options.ignoreUnsafe});\n    });\n\n  _.forEach(sortedDirectoryPaths, (directoryPath) => {\n    const config = readIndexConfig(directoryPath);\n    const optionsWithConfig = Object.assign({}, options, {config});\n    const siblings = readDirectory(directoryPath, optionsWithConfig);\n    const indexCode = createIndexCode(siblings, {config});\n    const indexFilePath = path.resolve(directoryPath, 'index.js');\n\n    fs.writeFileSync(indexFilePath, indexCode);\n  });\n};\n"]}